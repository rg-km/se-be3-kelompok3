const CANVAS_HEIGTH=600,CANVAS_WIDTH=900,CELL_SIZE=20,MAX_HP=3;function initRandomPostition(){return{posX:20*Math.floor(44*Math.random()),posY:20*Math.floor(29*Math.random())}}function initDirection(){return Math.floor(4*Math.random())}function getInitObject(){const e=document.getElementById("snakeBody"),t=document.getElementById("snakeHead"),n=document.getElementById("apple"),o=document.getElementById("medicine");return{snake:{id:1,posX:460,posY:300,direction:initDirection(),body:[{posX:460,posY:300}],bodyImage:e,headImage:t,score:0,hp:3},apple:{posX:initRandomPostition().posX,posY:initRandomPostition().posY,image:n},apple2:{posX:initRandomPostition().posX,posY:initRandomPostition().posY,image:n},medicine:{posX:initRandomPostition().posX,posY:initRandomPostition().posY,image:o}}}function main(){const{snake:e,apple:t,apple2:n,medicine:o}=getInitObject();INIT_LEVEL_1(e,t,n,o)}function INIT_LEVEL_1(e,t,n,o){const a=document.getElementById("snakeBoard"),s=new SnakeAPI(a),i=new Audio("assets/next-level.wav");document.getElementById("labelLevel").textContent="LEVEL 1";const c={posX:initRandomPostition().posX,posY:initRandomPostition().posY,direction:initDirection(),image:document.getElementById("cactus")},d=setInterval((()=>{c.direction=initDirection()}),2e3);s.initSpeed(35),s.startRunner((()=>{s.createSnake(e),s.createObjectOnBoard(t),s.createObjectOnBoard(n),medicineAtPrimeNumber(s,o,e.score),observeHealthPoint(s,e),updateScore(e),updateSpeed(35),s.createMovingObstacle(c,onHitByCactus),s.obstacle(12,6,20),s.obstacle(12,23,20),5===e.score&&(s.stopRunner(),s.clearBoard(),i.play(),INIT_LEVEL_2(e,t,n,o),clearInterval(d))}))}function INIT_LEVEL_2(e,t,n,o){const a=document.getElementById("snakeBoard"),s=new SnakeAPI(a),i=new Audio("assets/next-level.wav");document.getElementById("labelLevel").textContent="LEVEL 2",s.initSpeed(40),s.startRunner((()=>{s.createSnake(e),s.createObjectOnBoard(t),s.createObjectOnBoard(n),medicineAtPrimeNumber(s,o,e.score),observeHealthPoint(s,e),updateScore(e),updateSpeed(40),s.obstacle(5,7,16,ORIENTATION_VERTICAL),s.obstacle(39,7,16,ORIENTATION_VERTICAL),10===e.score&&(s.stopRunner(),s.clearBoard(),i.play(),INIT_LEVEL_3(e,t,n,o))}))}function INIT_LEVEL_3(e,t,n,o){const a=document.getElementById("snakeBoard"),s=new SnakeAPI(a),i=new Audio("assets/next-level.wav");document.getElementById("labelLevel").textContent="LEVEL 3";const c={posX:initRandomPostition().posX,posY:initRandomPostition().posY,direction:initDirection(),image:document.getElementById("cactus")},d=setInterval((()=>{c.direction=initDirection()}),2e3);s.initSpeed(45),s.startRunner((()=>{s.createSnake(e),s.createObjectOnBoard(t),s.createObjectOnBoard(n),medicineAtPrimeNumber(s,o,e.score),observeHealthPoint(s,e),updateScore(e),updateSpeed(45),s.createMovingObstacle(c,onHitByCactus),s.obstacle(15,10,15),s.obstacle(15,19,15),s.obstacle(5,7,16,ORIENTATION_VERTICAL),s.obstacle(39,7,16,ORIENTATION_VERTICAL),15===e.score&&(s.stopRunner(),s.clearBoard(),i.play(),INIT_LEVEL_4(e,t,n,o),clearInterval(d))}))}function INIT_LEVEL_4(e,t,n,o){const a=document.getElementById("snakeBoard"),s=new SnakeAPI(a),i=new Audio("assets/next-level.wav");document.getElementById("labelLevel").textContent="LEVEL 4",s.initSpeed(50),s.startRunner((()=>{s.createSnake(e),s.createObjectOnBoard(t),s.createObjectOnBoard(n),medicineAtPrimeNumber(s,o,e.score),observeHealthPoint(s,e),updateScore(e),updateSpeed(50),s.obstacle(15,4,8,ORIENTATION_VERTICAL),s.obstacle(15,11,14),s.obstacle(28,4,8,ORIENTATION_VERTICAL),s.obstacle(15,18,8,ORIENTATION_VERTICAL),s.obstacle(15,18,14),s.obstacle(28,18,8,ORIENTATION_VERTICAL),20===e.score&&(i.play(),s.stopRunner(),s.clearBoard(),INIT_LEVEL_5(e,t,n,o))}))}function INIT_LEVEL_5(e,t,n,o){const a=document.getElementById("snakeBoard"),s=new SnakeAPI(a);document.getElementById("labelLevel").textContent="LEVEL 5",s.initSpeed(55),s.startRunner((()=>{s.createSnake(e),s.createObjectOnBoard(t),s.createObjectOnBoard(n),medicineAtPrimeNumber(s,o,e.score),observeHealthPoint(s,e),updateScore(e),updateSpeed(55),s.obstacle(15,4,8,ORIENTATION_VERTICAL),s.obstacle(15,11,14),s.obstacle(28,4,8,ORIENTATION_VERTICAL),s.obstacle(15,18,8,ORIENTATION_VERTICAL),s.obstacle(15,18,14),s.obstacle(28,18,8,ORIENTATION_VERTICAL),s.obstacle(5,10,10,ORIENTATION_VERTICAL),s.obstacle(39,10,10,ORIENTATION_VERTICAL)}))}function medicineAtPrimeNumber(e,t,n){isPrime(n)&&e.createObjectOnBoard(t,!0,onEatMedicine)}function onEatMedicine(e,t){e.hp<3&&e.hp++;const n=new Audio("assets/get-hp.wav"),{posX:o,posY:a}=initRandomPostition();t.posX=o,t.posY=a,n.play(),e.score++}function observeHealthPoint(e,t){const n=document.getElementsByClassName("hp"),o=new Audio("assets/game-over.wav");0===t.hp&&(e.stopRunner(),setTimeout((()=>{o.play(),alert("Game Over.. You Lose..");const{snake:e,apple:t,apple2:n,medicine:a}=getInitObject();INIT_LEVEL_1(e,t,n,a)}),e.getSpeed()));for(let e=0;e<3;e++){n[e].src="assets/hp-empty.png";for(let e=0;e<t.hp;e++)n[e].src="assets/hp-full.png"}}function onHitByCactus(e,t){const n=new Audio("assets/hit-cactus.wav"),{posX:o,posY:a}=initRandomPostition();e.body=[{posX:o,posY:a}],n.play(),e.score--,e.posX=o,e.posY=a}const isPrime=e=>{for(let t=2,n=Math.sqrt(e);t<=n;t++)if(e%t==0)return!1;return e>1};function updateScore(e){document.getElementById("statusScore").textContent=e.score}function updateSpeed(e){document.getElementById("statusSpeed").textContent=e}function backsound(){this.backsound=document.createElement("audio"),this.backsound.src="assets/backsound.wav",this.backsound.setAttribute("preload","auto"),this.backsound.style.display=none,document.body.appendChild(this.backsound),this.play=function(){this.backsound.play()},this.stop=function(){this.sound.pause()}}
